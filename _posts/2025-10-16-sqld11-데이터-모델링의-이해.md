---
layout: post
title: "[SQLD]1-1. 데이터 모델링의 이해"
date: 2024-02-27
categories: [general]
tags: [Test]
---


## 모델링


### 정의


일정한 표기법에 의해 규칙을 가지고 표기하는 것


커뮤니케이션 효율성 극대화한 고급화된 표현방법


### 특징


**추상화(모형화, 가설적)** : 현실세계 일정한 형식에 맞추어 표현(일정한 양식 표기법)


**단순화** : 복잡한 현실세계 약속된 규약에 의해 제한된 표기법, 언어로 표현 쉽게 이해


**명확화** : 누구나 이해하기 쉽게 대상의 애매모호함 제거, 정확하게 현상을 기술


### 정보 시스템 구축에서 활용


계획, 분석, 설계 할 때 업무를 분석하고 설계하는데 이용


구축, 운영 단계에서는 변경과 관리의 목적으로 이용


### 관점


데이터 관점(Data, What) : 업무와 데이터 or 데이터 간의 관계


프로세스 관점(Process, How) : 업무가 실제 하는 일 or 무엇을 해야 하는지


상관 관점(Interaction) : 업무가 처리하는 일의 방법에 따라 데이터가 받는 영향


## 데이터 모델링


### 정의


정보 시스템 구축 위한 데이터 관점 업무 분석 기법


현실세계 데이터 약속된 표기법에 의해 표현


데이터베이스 구축 위한 분석/설계 과정


### 기능


시스템 가시화 도움


시스템 구조와 행동 명세화 가능


시스템 구축 구조화된 틀 제공


시스템 구축 과정에서 결정한 것 문서화


다양한 영역 집중 위해 다른 영역 세부사항 숨김(다양한 관점 제공)


특정 목표에 따라 구체화된 상세 수준의 표현방법을 제공


### 중요성


파급효과가 크다(Leverage) : 데이터 구조 변경으로 인한 일련의 변경작업 위험요소 해결


복잡한 정보 요구사항의 간결한 표현(Conciseness) : 요구사항, 한계 명확하고 간결하게


데이터 품질을 유지(Data quality) : 오래된 데이터의 정확성, 신뢰성 해결


### 유의점


**중복**(Duplication) : 데이터베이스가 여러 장소에 같은 정보 저장하는 것 주의


**비유연성**(Inflexibility) : 사소한 업무변화에 데이터모델 수시로 변경되면 유지보수 어려움 


→ 데이터의 정의를 데이터의 사용 프로세스와 분리


**비일관성**(Inconsistency) : 데이터의 중복이 없어도 비일관성 발생 가능


→ 모델링 할 때 데이터 간 상호 연관관계 명확히 정의


### 진행 단계


개념적 (추상) → 논리적 → 물리적(구체)


**개념**(계획, 분석) : 추상화, 업무중심, 포괄, 전사적, EA수립


**논리**(분석) : KEY, 속성, 관계 표현, 재사용성, 정규화


**물리**(설계) : 데이터베이스 이식, 성능/저장 등 물리적 성격 고려


### 데이터 독립성 필요성


유지보수 비용 증가


데이터 중복성 증가


데이터 복잡성 증가


요구사항 대응 저하


### 데이터 독립성 효과


각 View 의 독립성 유지, 계층별 View 에 영향 주지 않고 변경 가능


단계별 Schema에 따라 DDL과 DML의 다름을 제공


구조, 독립성, 사상(Mapping)


### ANSI, SPARC 데이터베이스 구조 및 독립성


외부단계 / 개념단계 / 내부단계 (서로 간섭 x)


논리적 독립성 (외부 - 개념) : 개념 스키마 변경 → 외부 스키마 영향x (사용자 특성에 맞는 변경 가능, 통합 구조 변경 가능)


물리적 독립성(개념 - 내부) : 내부 스키마 변경 → 외부 스키마 영향 x (물리적 구조, 개념 구조 상호간 영향 없이 서로 변경 가능)


데이터 모델링은 통합 관점 뷰를 가지는 개념 스키마를 만들어 가는 과정


### 사상(Mapping)


상호 독립적인 개념을 연결시켜주는 다리


**논리적 사상** : 외부화면 및 사용자 인터페이스 스키마 구조는 개념스키마와 연결됨


**물리적 사상** : 개념스키마 구조와 물리적 저장된 구조(테이블 스페이스)와 연결됨


### 좋은 데이터 모델의 요소 6가지


완전성, 중복배제, 업무규칙, 데이터 재사용, 의사소통, 통합성


### 데이터 모델링의 요소


업무가 관여하는 어떤 것(Thing) : 엔티티타입, 엔티티/엔티티, 인스턴스, 어커런스


그것이 가지는 성격(Attributes) : 속성/속성값


그것들 간의 관계(Relationships) : 관계/페어링


## 엔티티


### 개념


명사, 업무상 관리가 필요한 관심사, 저장이 되기 위한 어떤 것(Thing)


### 특징


업무에서 꼭 필요한 정보


유일한 식별자로 식별이 가능해야 함


인스턴스 두 개 이상의 집합


업무 프로세스에 의해 이용됨


반드시 속성이 있어야 함(주 식별자만 존재하고 일반속성 없어도 적절하지 않음, 관계 엔티티 예외)


다른 엔티티와의 관계가 최소 한 개 이상 존재(통계성, 코드성, 내부필요 엔티티 예외)


### 분류


**유무형** : 유형, 개념, 사건


**발생시점** : 기본 → 중심 → 행위


### 명명


가능한 현업에서 사용하는 용어 사용


가능하면 약어 사용하지 않음


단수명사 사용


모든 엔티티에서 유일한 이름 부여


생성 의미대로 이름 부여


## 속성


### 개념


업무에서 필요, 의미상 더이상 분리되지 않음, 인스턴스의 구성요소(엔티티 설명)


### 인스턴스 - 속성 - 엔티티의 관계


한 개의 엔티티는 두 개 이상의 인스턴스 집합이어야 함


한 개의 인스턴스는 두 개 이상의 속성을 가짐


한 개의 속성은 한 개의 속성값을 가짐


![기본구조](https://prod-files-secure.s3.us-west-2.amazonaws.com/8fe0a7f9-120c-81d3-b4d8-0003f7c0f162/4475051d-6297-4b11-b437-7ca61bd3d9b0/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466T6NS43K7%2F20260126%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260126T094411Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEHEaCXVzLXdlc3QtMiJGMEQCIFoFMx0cDJToV7a9jjM0l3v%2FLj0TrALrxzcuVdkTx5EuAiBvpitafz1jw5tNWQMqGvGT8zX9i0iEEtVFIKgMVS4rOSr%2FAwg6EAAaDDYzNzQyMzE4MzgwNSIMv6Q%2FdYbAJFZ%2BPv3UKtwDks2C6aHLlNkLJiN28SfnM0wsm0nAIbZISWfFO%2BlL20KUDIkfKzwfg3LUSkD%2F0MDZgJ%2FiQC2HI%2FkTSfkZ0m8vI0QGhUGhlpoko8VGGDEvC2m4Op25ok4PzdMiyXE7UHNvg4sseyVsp8RN8ctQtPmyNqYi%2FgbButCoTp%2Bysl3%2FwvzjGp5cFGVUPlDU0r7zO0EjtYRhcwPE44mej5CsBCi1oLQFaeJPa9bd1fCd%2F%2FBfio6xzOCMwnvFcXoYmads%2FtOE0eJ2LK1QrurTY6ZRRGFMQ9GN3wf%2BpHvlLimfLMQQfxBvTVZwtkLOe7%2FkM65siI1sSabfEgLZnc0i188nGuUwvwwUYtv2D9ijnh6puBVfYrF3YIUjoxO9bKvwo04QBmrS68NySGh4GDZmGV%2BTjSTTkFcpMkPT2NCfDAZ8POdku4HC13qI1Vgj6vYNsV%2FONOxgdHvo5ibn4oh2KXAS78L7amcxFGxyU%2BKas7d05pZZdaqUVp6q0enVsbIkyCssUicTFHCnErjNYSwNQj8wA6dwlclCFDawjz12CSdR9honULuzsWjaoNCXuXwcKVwMN%2FOAa8AnCBoS2hdv%2B0%2Ftp1zNWARf8M78r9RAY1ixWT4k%2F2qWeR0mkRQiAPdFKhowqdjcywY6pgGel4zu73CCS4L5HbmCGuiPNqvZDn8QgSghL25is8UdVPn4kdtlOTzeunuPXHkveXkNP5N1AxxtRiC84v9ZVxZvaDHunMIWxWVdUr7SL3T9zAaI5dOMoYNFL1fDmHoL7O3RvZu%2B4FSeA0xeDeySDCDeQzV1l5MAY7poKsDX83MCEc75ZnuQN5Wyxtf6BHOlVbbn5lroz3%2Fla%2BvgHCbjP3cWzUV8SFIi&X-Amz-Signature=631ef15319adf40bb472a0d8ed92d56cf0a498763a0236fb30554a0fc6c3d94f&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)


### 특징


반드시 해당 업무에서 필요하고 관리하고자 하는 정보


정규화 이론에 근간, 정해진 주 식별자에 함수적 종속성을 가져야 함


하나의 속성에는 한 개의 값만을 가짐, 다중값일 경우 별도의 엔티티 이용하여 분리


### 분류


**특성에 따른 분류**


기본속성 - 업무로부터 추출한 모든 속성


설계속성 - 새로 만들거나 정의하는 속성(코드성, 일련번호 등)


파생속성 - 다른 속성의 영향을 받아 발생(계산된 값 등)


**구성 방식에 따른 분류**


PK(기본키), FK(외래키), 일반속성


### 도메인


속성이 가질 수 있는 값의 범위


데이터 타입, 크기, 제약사항 지정


### 명명


해당 업무에서 사용하는 이름 부여


서술식 속성명 사용안함


약어 사용 가급적 금지


전체 데이터 모델에서 유일성 확보하는 것이 좋음


## 관계


### 정의


인스턴스 사이의 논리적인 연관성


존재나 행위로서 서로에게 연관성이 부여된 상태


### 페어링


인스턴스 간의 개별적 관계


페어링의 집합을 논리적으로 표현 = 관계


### 분류


존재에 의한 관계


행위에 의한 관계


### 표기법


관계명 : 엔티티가 관계에 참여하는 형태, 각 관계는 두 개의 관계명 및 관점을 가짐


관계차수 : 1:1, 1:N, N:N(관계 엔티티 이용)


관계선택사양 : 필수참여(Mandatory), 선택참여(Optional)


### 정의


두 개의 엔티티 사이에 관심있는 **연관규칙**이 있는가 ?


두 개의 엔티티 사이에 **정보의 조합**이 발생되는가 ?


업무기술서, 장표에 관계연결에 대한 **규칙이 서술**되어 있는가 ?


업무기술서, 장표에 **관계연결을 가능하게 하는 동사**가 있는가 ?


### 읽기


각 / 기준엔티티 / 관계차수 / 관련엔티티 / 필수 or 선택 / 관계명


ex) 각각의 사원은 한 부서에 때때로 속한다


각 부서에는 여러 사원이 항상 소속된다


## 식별자


### 개념


엔티티를 구분짓는 논리적인 이름


엔티티를 대표할 수 있는 속성


엔티티에는 반드시 하나의 유일한 식별자가 존재함


### 특징


유일성 : 주 식별자에 의해 엔티티 내의 모든 인스턴스 유일하게 구분


최소성 : 주 식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수여야 함


불변성 : 주 식별자가 한 번 특정 엔티티에 지정되면 그 식별자 값은 변하지 않아야 함


존재성 : 주 식별자가 지정되면 반드시 데이터 값이 존재해야 함(Null 안됨)


### 분류


**대표성 여부** : 주 식별자 / 보조 식별자


**스스로 생성 여부** : 내부 식별자 / 외부 식별자


**속성의 수** : 단일 식별자 / 복합 식별자


**대체 여부** : 본질 식별자 / 인조 식별자

1. **주 식별자 (Primary Key)**: 주 식별자는 각 엔티티의 고유성을 식별하는 데 사용되는 주요 식별자입니다. 보통 데이터베이스 테이블에서 기본 키로 사용됩니다. 엔티티를 고유하게 식별하는 데 사용됩니다.
2. **보조식별자 (Secondary Key)**: 보조식별자는 주 식별자와는 다르게 엔티티를 식별하는 데 사용되는 보조적인 식별자입니다. 주로 데이터 검색을 위해 사용됩니다.
3. **내부식별자 (Internal Identifier)**: 내부식별자는 시스템 내부에서 사용되는 식별자로, 사용자에게는 노출되지 않습니다. 주로 데이터베이스나 프로그램 내에서 데이터를 관리할 때 사용됩니다.
4. **외부식별자 (External Identifier)**: 외부식별자는 엔티티를 외부 시스템이나 외부 소스에서 식별하는 데 사용되는 식별자입니다. 예를 들어 다른 시스템에서 사용하는 고유 ID나 코드가 될 수 있습니다.
5. **단일식별자 (Simple Identifier)**: 단일식별자는 하나의 속성만 사용하여 엔티티를 식별하는 식별자입니다. 예를 들어, 학생의 경우 학번이 단일식별자가 될 수 있습니다.
6. **복합식별자 (Composite Identifier)**: 복합식별자는 둘 이상의 속성을 조합하여 엔티티를 식별하는 식별자입니다. 예를 들어, 주소를 식별할 때 도시와 우편번호를 함께 사용하는 경우가 있습니다.
7. **본질식별자 (Natural Identifier)**: 본질식별자는 엔티티의 본질적인 특성을 나타내는 식별자입니다. 예를 들어, 사람의 경우 주민등록번호나 이름이 본질적인 식별자가 될 수 있습니다.
8. **인조식별자 (Surrogate Identifier)**: 인조식별자는 엔티티를 식별하기 위해 인위적으로 생성된 식별자입니다. 일반적으로 데이터베이스에서 자동으로 생성되는 일련번호나 UUID가 인조식별자의 예시입니다.

### 주 식별자 도출 기준


해당 업무에서 자주 이용되는 속성을 지정


명칭, 내역 등과 같이 이름으로 기술되는 것들은 피함


→ 구분자가 존재하지 않을 경우 새로운 식별자 생성(일련번호, 코드 등)


복합으로 주 식별자 구성할 경우 너무 많은 속성 포함하지 않도록


→ 주 식별자 개수가 많을 경우 새로운 인조식별자를 생성


### 식별자 관계


부모의 주 식별자 → 자식의 주 식별자로 상속


Null 안됨


1:1, 1:N 관계


강한 연결관계, 부모에 종속, 상속받은 주 식별자 타 엔티티 이전 필요


**문제** - 주 식별자 속성이 지속적 증가 가능 → 복잡성과 오류 가능성 유발


### 비식별자 관계


부모로부터 속성을 받아 일반속성으로 사용(약한 종속)


상속받은 속성 타 엔티티에 차단, 부모쪽 관계참여 선택관계


**사용하는 경우**


부모 없는 자식 생성 가능한 경우


엔티티별로 데이터 생명주기 다르게 관리하는 경우


여러개 엔티티가 하나로 통합 표현, 각각 별도의 관계 가질 경우


자식 엔티티에서 별도의 주 식별자 생성이 더 유리할 경우


**문제** - 속성이 자식에게 상속 안됨 → 부모 엔티티까지 조인 현상 발생 → 불필요한 조인 발생 → SQL 구문 길어져 성능 저하

