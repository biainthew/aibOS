---
layout: post
title: "메모리/참조 관련"
date: 2025-10-30
categories: [general]
tags: [Python]
excerpt_separator: ""
---



### 1. 얕은/깊은 복사


**얕은 복사(****`.copy()`****)**


최상위 객체 : 새로운 객체로 생성


내부의 중첩된 객체 : 원본과 공유


**깊은 복사(****`.deepcopy()`****)**


최상위 객체 : 새로운 객체로 생성


내부의 중첩된 객체 : 새로운 객체로 생성


1차원에서는 얕은 복사와 동일하게 동작


```python
import copy

original = [[1, 2], [3, 4]]
shallow = original.copy()
deep = copy.deepcopy(original)

### 메모리 구조
original → 주소1000 : [주소2000, 주소3000]
                        ↓         ↓
                     [1, 2]    [3, 4]

얕은 복사 후:
shallow → 주소1100 : [주소2000, 주소3000]  ← 리스트는 새로 생성(주소 다름)
                       ↓         ↓
                    [1, 2]    [3, 4]    ← 내부 요소는 같은 주소 참조

깊은 복사 후:
deep → 주소1200 : [주소2100, 주소3100]     ← 리스트도 새로 생성
                    ↓         ↓
                 [1, 2]    [3, 4]       ← 내부 요소도 새로 생성
```


### 2. 할당(=)


같은 주소값을 가리킴 → 변경 시 같이 변경됨


```python
list1 = [1, 2, 3]
list2 = list1
list2.append(4)
print(list1)  # [1, 2, 3, 4]
```


### 3. 슬라이싱 이용


얕은 복사와 동일하게 동작


```python
list1 = [1, 2, 3]
list2 = list1[:]

list2.append(4)
print(list1)  # [1, 2, 3]
print(list2)  # [1, 2, 3, 4]
```


### 4. 리스트 메서드의 반환값


반환값이 `None`인 메서드들은 원본을 수정


```python
list1 = [3, 1, 2]
result = list1.sort()  # 원본을 정렬함

print(result)  # None
print(list1)   # [1, 2, 3]
```


```python
list1 = [1, 2, 3]
result = list1.append(4)  # 원본에 추가함

print(result)  # None
print(list1)   # [1, 2, 3, 4]
```


새로운 객체를 반환하는 함수는 원본이 유지됨


```python
list1 = [3, 1, 2]
list2 = sorted(list1)  # 새 리스트 반환

print(list1)  # [3, 1, 2]
print(list2)  # [1, 2, 3]
```


### 5. 가변 객체 vs 불변 객체


가변 객체


: `list`, `dict`, `set`


불변 객체


: `int`, `float`, `str`, `tuple`


: 객체 내용을 변경할 수 없어서 참조 문제 발생하지 않음


```python
a = 10
b = a
b = 20
print(a)  # 10  ← 변경 안됨 (새 객체 생성됨)

str1 = "hello"
str2 = str1
str2 = "world"
print(str1)  # "hello"  ← 변경 안됨
```


```python
def modify_int(x):
    x = x + 10

num = 5
modify_int(num)
print(num)  # 5  ← 변경 안됨
```


### 6. is / ==


`is` : 주소값 비교


`==` : 값 비교


```python
list1 = [1, 2, 3]
list2 = [1, 2, 3]

# is : 주소(객체) 비교
print(list1 is list2)  # False (다른 객체)

list3 = list1
print(list1 is list3)  # True (같은 객체)

# == : 값 비교
print(list1 == list2)  # True (값이 같음)
```

