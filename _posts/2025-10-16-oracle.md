---
layout: post
title: "Oracle"
date: 2024-11-01
categories: [general]
tags: [Sql]
excerpt_separator: ""
---



### 1. Select


{% raw %}
```sql
SELECT 컬럼1, 컬럼2, ...
FROM 테이블명
WHERE 조건
ORDER BY 컬럼 [ASC | DESC];
```
{% endraw %}


### 2. 집계함수와 Group By


**주요 집계 함수**

1. SUM()
2. AVG()
3. COUNT()
4. MIN()
5. MAX()

{% raw %}
```sql
SELECT department_id, AVG(salary) AS avg_salary
FROM employees
GROUP BY department_id
HAVING AVG(salary) > 5000;
```
{% endraw %}


### 3. INSERT


{% raw %}
```sql
INSERT INTO 테이블명 (컬럼1, 컬럼2, ...)
VALUES (값1, 값2, ...);
```
{% endraw %}


### 4. UPDATE


{% raw %}
```sql
UPDATE 테이블명
SET 컬럼1 = 값1, 컬럼2 = 값2, ...
WHERE 조건;
```
{% endraw %}


### 5. DELETE


{% raw %}
```sql
DELETE FROM 테이블명
WHERE 조건;
```
{% endraw %}


### 6. CREATE TABLE


{% raw %}
```sql
CREATE TABLE 테이블명 (
    컬럼1 데이터타입 제약조건,
    컬럼2 데이터타입 제약조건,
    ...
);
```
{% endraw %}


### 7. ALTER TABLE


{% raw %}
```sql
-- 컬럼 추가
ALTER TABLE employees
ADD (phone_number VARCHAR2(20));

-- 컬럼 데이터 타입 변경
ALTER TABLE employees
MODIFY (salary NUMBER(10, 2));

-- 컬럼 삭제
ALTER TABLE employees
DROP COLUMN phone_number;
```
{% endraw %}


### 8. 제약 조건(Constraints)

1. PRIMARY KEY : 테이블의 각 행을 고유하게 식별
2. FOREIGN KEY : 다른 테이블의 기본 키를 참조하여 데이터 관계를 설정
3. UNIQUE : 고유한 값을 가져야 함
4. NOT NULL : NULL 값을 허용하지 않음
5. CHECK : 특정 조건을 만족해야 함

{% raw %}
```sql
CREATE TABLE employees (
    employee_id NUMBER PRIMARY KEY,
    first_name VARCHAR2(50),
    last_name VARCHAR2(50),
    salary NUMBER(10, 2) CHECK (salary > 0),
    department_id NUMBER,
    CONSTRAINT fk_department FOREIGN KEY (department_id) REFERENCES departments(department_id)
);
```
{% endraw %}


### 9. 서브쿼리


보통 WHERE, SELECT, FROM 절에서 사용된다


{% raw %}
```sql
SELECT first_name, last_name
FROM employees
WHERE department_id IN (SELECT department_id FROM departments WHERE location_id = 100);
```
{% endraw %}


### 10. JOIN 문


두 개 이상의 테이블을 결합하여 데이터를 조회할 때 사용된다


오라클은 INNER JOIN, LEFT JOIN, RIGHT JOIN, FULL JOIN 등을 지원한다


{% raw %}
```sql
SELECT e.first_name, e.last_name, d.department_name
FROM employees e
JOIN departments d ON e.department_id = d.department_id;
```
{% endraw %}


### 11. 뷰  생성


뷰는 저장된 쿼리로 테이블처럼 조회할 수 있다


{% raw %}
```sql
CREATE VIEW employee_view AS
SELECT first_name, last_name, department_name
FROM employees e
JOIN departments d ON e.department_id = d.department_id;
```
{% endraw %}


### 12. 시퀀스 생성


시퀀스는 고유한 숫자를 자동으로 생성해주는 객체로 주로 기본 키 값을 자동으로 생성할 때 사용된다


{% raw %}
```sql
CREATE SEQUENCE employee_seq
START WITH 1
INCREMENT BY 1
NOCACHE;
```
{% endraw %}


사용법


{% raw %}
```sql
INSERT INTO employees (employee_id, first_name, last_name)
VALUES (employee_seq.NEXTVAL, 'John', 'Doe');
```
{% endraw %}


### 13. PL/SQL 절차형 프로그래밍


{% raw %}
```sql
DECLARE
    v_salary NUMBER := 5000;
BEGIN
    IF v_salary > 4000 THEN
        DBMS_OUTPUT.PUT_LINE('Salary is above 4000');
    ELSE
        DBMS_OUTPUT.PUT_LINE('Salary is below 4000');
    END IF;
END;
```
{% endraw %}

