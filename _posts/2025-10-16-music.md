---
layout: post
title: "Music"
date: 2023-01-11
categories: [general]
tags: [Javascript/Jquery]
---


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/8fe0a7f9-120c-81d3-b4d8-0003f7c0f162/6faf579d-61d9-4c2a-8b53-9793c30068a1/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466WP4N4F5Y%2F20251229%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251229T012004Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEMn%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJGMEQCIDNNRNox4iLxEwa6ksq2iCE0X%2BxsgyTysq%2FnnqiJDPHMAiBB3KB4flkVCwS%2FwLLQ3ONnFr82qRHx5kxf9VEz6I17SCqIBAiS%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAAaDDYzNzQyMzE4MzgwNSIMPw63%2BHD4I8henZM3KtwDMNJ%2BOGOOATNotPT6zOzCgCKMp8i4U%2BOyFWBsE43%2B%2BrjQAJ8NI9fTYvcwh1sn2jlQG77jm9dq%2FSJLB1A8sbab1NIkv22iLk%2BeFA3tYes5D5w%2B4XRuz9tHX%2B6soPW%2BnclADpYWRFdUhu01Ca42Lzy2AJpwWO8%2Bl03wZGYw%2BvbJg00Q3X2Q3Q7PRHYcQZiGkvzqkYPQ%2BAimx2Yrw%2BSQMjBcVCPZ45%2BQVJx4hUj1XIAqGtdlrjz2AJLbtuAKLrzw9ViiK90zeyOmvGs0VwJUn7ORhV6RU5ONa700hlVjTdrRd66kzhEltvqA%2FvxW6bslaE1GE3w%2BHvuuWrt7nypUO3kIBfGClbh1ruJsxx2yooyyEklj4Jj4C9hLvN0hCIUdKG2uMTxu1uRmUX3XmbSsxirhYUCC2AqS3etYhdpBVEoKRbrHLjuCKPwrWBLqBVujETBe6fLg8Xq9%2FTDCeQLgcy880DBvl8rKtD46V17h86R6QhbZcKXeESmyLTDNZAGfRT9L8VOrkI%2BhkNUAwVtESuKHLT5oDhe%2B6ShOQTvf9cZtzEU0O%2BPYC8O%2BpVIw26X72ZJOYFPPTeHzGe2os5yDCvVi4Sgw9k%2FU5zn9V60u3RYzNxo%2Fay46BQWYlNmjhtAw36THygY6pgG0ZKu5%2BBtb1X2ceLwDNZTaThub5Y2caTb63e2H%2BnK%2B7dD4fyJ8qUeMjaOeh1b2tN0bLtEdTmLLy0nSqco%2BScpDuSCH7b%2FD38iS4udU9nerS1Bh3CtmEbfMhL9CZvxFMTa%2Bh%2BIWJuCpTZbg6prtr%2BXZhWieCuoMqAG9gcxZ6YJ4HK5UE9YB4OIGx3Lnd3tei47y0ic%2Bxes%2FUx3O9IGGZ8V9joVGiFAz&X-Amz-Signature=762b507d72561ed100ab9e257f51103d4d3abb902f41ae576341137e8b59c657&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)


```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.min.css"
    />
    <link rel="stylesheet" href="./css/style.css">
    <script src="./js/script.js" defer></script>
</head>
<body>
    <h1>Music Player</h1>
    <div class="music-container" id="music-container">
        <div class="music-info">
            <h4 id="title"></h4>
            <div class="progress-container" id="progress-container">
                <div class="progress" id="progress"></div>
            </div>
        </div>
        <audio src="./music/hey.mp3" id="audio"></audio>
        <div class="img-container">
            <img src="./images/hey.jpg" alt="music-cover" id="cover">
        </div>
        <div class="navigation">
            <button id="prev" class="action-btn">
                <i class="fas fa-backward"></i>
            </button>
            <button id="play" class="action-btn action-btn-big">
                <i class="fas fa-play"></i>
            </button>
            <button id="next" class="action-btn">
                <i class="fas fa-forward"></i>
            </button>
        </div>
    </div>
</body>
</html>
```


```css
*{margin: 0;padding: 0;box-sizing: border-box;}
body{
    background-image: linear-gradient(0deg, rgba(247,247,247,1) 23%, rgba(252,221,221,1) 92%);

    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
}
.music-container{
    background-color: #fff;
    border-radius: 15px;
    box-shadow: 0 20px 20px 0 rgba(255,169,169,.6);
    display: flex;
    padding: 20px 30px;
    position: relative;
    margin: 100px 0;
    z-index: 10;
}
.music-info{
    background-color: rgba(255,255,255,.5);
    border-radius: 15px 15px 0 0;
    position: absolute;
    top: 0;
    left: 20px;
    width:360px;
    padding: 10px 10px 10px 150px;
    opacity: 0;
    transform: translateY(0%);
    transition: transform .3s ease-in, opacity .3s ease-in;
}
.music-container.play .music-info{
    opacity: 1;
    transform: translateY(-100%);
}
.progress-container{
    background:#fff;
    border-radius: 5px;
    cursor: pointer;
    width: 100%;
    height: 4px;
    margin: 10px 0;
}
.progress{
    background-color: orange;
    width: 0;
    height: 100%;
    border-radius: 5px;
    transition: width .1s linear;
}
.img-container{position: relative; width: 110px}
.img-container img{
    position: absolute;
    border-radius: 50%;
    height: 110px;
    width: inherit;
    object-fit: cover;
    bottom:0;
    left: 0;
    animation: rotate 3s linear infinite;
    animation-play-state: paused;
}
.music-container.play .img-container img{
    animation-play-state: running;
}
@keyframes rotate {
    from{transform: rotate(0deg);}
    to{transform: rotate(360deg);}
}
.navigation{
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
}
.action-btn{font-size: 20px; color: #cdc2d0; background-color: #fff; border: 0; cursor: pointer; padding: 10px; margin: 0 20px;}
.action-btn.action-btn-big{
    font-size: 30px;
    color: rgb(133, 130, 130)
}
.action-btn:focus{outline: 0;}
```


```javascript
const musicConatainer = document.getElementById('music-container');
const prevBtn = document.getElementById('prev')
const playBtn = document.getElementById('play')
const nextBtn = document.getElementById('next')
const audio = document.getElementById('audio')
const progress = document.getElementById('progress')
const progressContainer = document.getElementById('progress-container')
const title = document.getElementById('title')
const cover = document.getElementById('cover')

const songs = ['hey','summer','ukulele'];
let songIndex = 2; //0 1 2

loadSong(songs[songIndex])
function loadSong(song){
    title.innerText=song;
    audio.src=`music/${song}.mp3`;
    cover.src=`images/${song}.jpg`;
}

function playSong(){
    musicConatainer.classList.add('play')
    playBtn.querySelector('i.fas').classList.remove('fa-play')
    playBtn.querySelector('i.fas').classList.add('fa-pause')
    
    audio.play();
}
function pauseSong(){
    musicConatainer.classList.remove('play');
    playBtn.querySelector('i.fas').classList.add('fa-play')
    playBtn.querySelector('i.fas').classList.remove('fa-pause')
    
    audio.pause();
}

playBtn.addEventListener('click',() => { //두번클릭하는건 조건문이 필요
    const isPlaying = musicConatainer.classList.contains('play'); //contain 있는지 없는지 확인
    if(isPlaying){
        pauseSong()
    }else{
        playSong()
    }
})

function nextSong(){
    songIndex++;
    if(songIndex > songs.length-1){
        songIndex=0;
    }
    loadSong(songs[songIndex]);
    playSong();
}
nextBtn.addEventListener('click',nextSong)
function prevSong(){
    songIndex--;
    if(songIndex < 0){
        songIndex = songs.length-1
    }
    loadSong(songs[songIndex]);
    playSong();
}
prevBtn.addEventListener('click',prevSong)
function updateProgress(e){
    const{duration, currentTime} = e.srcElement;
    const progressPercent = (currentTime / duration) * 100
    progress.style.width = `${progressPercent}%`;
}

function setProgress(e){
    const width = this.clientWidth;
    const clickX = e.offsetX;
    const duration = audio.duration;

    audio.currentTime = (clickX/width) *duration
}
audio.addEventListener('timeupdate',updateProgress)
progressContainer.addEventListener('click',setProgress)
audio.addEventListener('ended',nextSong)
```

