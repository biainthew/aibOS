---
layout: post
title: "static"
date: 2025-01-14
categories: [general]
tags: [Java]
excerpt_separator: ""
---



클래스에 속한 멤버(필드, 메서드 등)를 정의할 때 사용되는 키워드로 객체를 생성하지 않고 클래스 자체에서 직접 접근할 수 있도록 함

1. **static 변수 (클래스 변수)**

    static으로 선언된 변수는 클래스에 속하게 되며 모든 인스턴스에서 공유됨


    즉 객체마다 독립적인 값이 아닌 클래스 자체에서 공통된 값을 가짐


    ```java
    class Counter {
    	static int count = 0;
    	
    	Counter() {
    		count ++; // 객체가 생성될 때마다 count 증가
    	}
    }
    
    public class Main {
    	public static void main(String[] args) {
    		Counter c1 = new Counter();
    		Counter c2 = new Counter();
    		
    		System.out.println(Counter.count);  // 2
    	}
    }
    ```


    > ✅ `static int count` 에서 `static`을 빼면 ❓  
    > **에러코드**  
    > non-static variable `count` cannot be referenced from a static context  
    >   
    > **이유**  
    > `count` 변수가 인스턴스 변수(non-static variable)로 선언되어 있기 때문, 즉 `count` 는 각 객체마다 존재하는 값이기 때문에 `Counter.count` 로 접근하려고 할 때 컴파일 오류 발생  
    >   
    > **해결방법**  
    > 1. `count` 를 `static` 변수로 선언  
    > 2. `count` 를 인스턴스 변수로 두고 각 객체에서 참조 (`c1.count`, `c2.count`)

2. **static 메서드 (클래스 메서드)**

    static 메서드는 객체를 생성하지 않고 클래스 이름으로 바로 호출할 수 있음


    또한 static 메서드 내에서는 다른 static 멤버만 사용할 수 있고 객체의 인스턴스 변수나 인스턴스 메서드를 사용할 수 없음


    ```java
    class MathUtils {
    	static int add(int a, int b) {
    		return a + b;
    	}
    }
    
    public class Main {
    	public static void main(String[] args) {
    		int result = MathUtils.add(5, 3); // 객체 생성 없이 클래스 이름으로 호출
    		System.out.println(result);  // 8
    	}	
    }
    ```


    > ✅ `static int add` 에서 `static`을 빼면 ❓  
    > **에러코드, 이유** : 위와 동일  
    >   
    > **해결방법**  
    > 1. `add` 를 `static` 메서드로 선언  
    > 2. `add` 를 인스턴스 메서드로 두고 `MathUtils` 클래스의 객체를 생성  
    >     (`MathUtils mathUtils = new MathUtils();`)

3. **static 블록 (정적 초기화 블록)**

    static 블록은 클래스가 처음 로드될 때 한 번만 실행됨


    주로 클래스 초기화 시 필요한 설정을 하거나 정적 변수에 대한 초기화를 할 때 사용됨


    ```java
    class Example {
    	static {
    		System.out.println("클래스가 로드될 때 실행됩니다.");
    	}
    }
    
    public class Main {
        public static void main(String[] args) {
            new Example();  // 클래스 로딩 시 static 블록이 실행됨
        }
    }
    ```

4. **static 클래스 (내부 클래스)**

    static으로 선언된 내부 클래스는 외부 클래스의 인스턴스를 생성하지 않고도 인스턴스를 생성할 수 있음


    이는 주로 외부 클래스의 인스턴스와 상관없이 독립적으로 동작하는 내부 클래스가 필요할 때 사용됨


    ```java
    class Outer {
    	static class Inner {
    		void display() {
    			System.out.println("Static Inner Class");
    		}
    	}
    }
    
    public class Main {
        public static void main(String[] args) {
            Outer.Inner inner = new Outer.Inner();
            inner.display();  // "Static Inner Class"
        }
    }
    ```


    > ✅ `static class Inner` 에서 `static`을 빼면 ❓  
    > **에러코드**  
    > an enclosing instance that contains `Outer.Inner` is required  
    >   
    > **이유**  
    > `Outer.Inner` 를 호출하려면 `Outer` 클래스의 객체를 먼저 만들어야 `Inner` 클래스의 인스턴스를 생성할 수 있기 때문  
    >   
    > **해결방법**  
    > 1. `Inner` 클래스를 `static` 클래스로 선언  
    > 2. `Inner` 클래스 인스턴스화 전에 `Outer` 클래스 객체를 생성  
    >     (`Outer outer = new Outer(); Outer.Inner inner = outer.new Inner();`)

5. **static 과 this, super**

    static 메서드나 변수 내에서는 this나 super를 사용할 수 없음 왜냐면 static 메서드는 객체에 의존하지 않기 때문에


    ```java
    class Parent {
    	static void display() {
    		// this.display();  // 오류! static 메서드에서 this 사용 불가
    	}
    }
    ```


**요약**

- static 변수는 클래스 변수로서 모든 인스턴스가 공유
- static 메서드는 클래스 이름을 통해 호출하며 객체를 생성하지 않고도 사용할 수 있음
- static 블록은 클래스 로드 시 초기화 작업을 수행
- static 내부 클래스는 외부 클래스 인스턴스 없이 사용할 수 있음

**왜 쓰는지 ?**

- 객체 생성 없이 사용할 수 있는 멤버 제공
- 공유 데이터를 다룰 때 유용하며 클래스 레벨에서 공통 데이터를 관리할 수 있음
- 효율적인 메모리 사용을 위해 객체들이 공통으로 사용할 수 있는 값을 정의
- 독립적인 기능을 제공할 때 내부 클래스를 독립적으로 사용할 수 있게 함
