---
layout: post
title: "Stream"
date: 2025-02-03
categories: [general]
tags: [Java]
excerpt_separator: ""
---



### 개념

1. `Stream` 은 데이터의 흐름을 나타냄 데이터는 한번에 하나씩 처리되며 중간 처리 후 최종 결과를 반환
2. 컬렉션, 배열 등에서 데이터 원소들을 하나씩 추출하여 처리하는 방법을 제공
3. `Stream API` 는 선언형 방식으로 데이터 흐름을 정의하기 위해 반복문을 명시적으로 작성하지 않아도 됨

### 특징

- 데이터 원소들을 일괄적으로 처리 : 데이터를 하나씩 처리하는 for문을 쓰지 않고 파이프라인을 사용해 연속적인 작업을 수행
- 중간 연산과 최종 연산을 분리
    - 중간 연산 : 데이터를 변형하거나 필터링하는 작업(`filter, map, distinct` 등)
    - 최종 연산 : 데이터를 처리하여 결과를 생성하는 작업(`collect, reduce, forEach` 등)

### 사용 예시

1. **스트림 생성**
스트림은 컬렉션, 배열 등을 통해 생성할 수 있음
예를 들어 리스트에서 스트림을 만들면 그 리스트의 요소들을 하나씩 처리할 수 있는 스트림 객체가 생성됨

    ```java
    List<String> names = Arrays.asList("Alice", "Bob", "Charlie");
    Stream<String> stream = names.stream(); //리스트에서 스트림 생성
    ```

2. **중간 연산 (Intermediate Operation)**
스트림에서 데이터를 필터링하거나 변형하는 작업을 중간 연산 이라고 하는데 중간 연산은 lazy 함
즉 실제로 연산이 실행되지 않고 최종 연산이 호출되기 전까지는 아무 작업도 수행하지 않음

    ```java
    // 이름이 Alice 인 항목만 필터링
    stream.filter(name -> name.equals("Alice"))
    ```

3. **최종 연산 (Terminal Operations)**
최종 연산은 스트림을 소비하고 결과를 반환하는 연산으로 `collect()` 나 `forEach()` 가 해당됨

    ```java
    // 결과를 리스트로 수집
    List<String> result = stream.filter(name -> name.startsWith("A"))
    														.collect(Collectors.toList());
    ```

4. **예시**

    ```java
    public class StreamExample {
        public static void main(String[] args) {
            List<String> names = Arrays.asList("Alice", "Bob", "Charlie", "Alice", "David");
    
            // 이름이 'Alice'인 항목만 필터링 후 출력
            names.stream()
                 .filter(name -> name.equals("Alice"))  // 필터링 (중간 연산)
                 .forEach(System.out::println);         // 출력 (최종 연산)
        }
    }
    
    // 실행 결과 : Alice
    ```


### 중간 연산

1. `filter()` : 조건을 만족하는 데이터만 남김

    ```java
    stream.filter(x -> x > 10);
    ```

2. `map()` : 데이터를 변환 (예. 리스트의 값을 다른 값으로 변환)

    ```java
    stream.map(x -> x * 2);
    ```

3. `distinct()` : 중복된 요소를 제거

    ```java
    stream.distinct();
    ```


### 최종 연산

1. `collect()` : 스트림의 결과를 컬렉션(리스트, 셋 등)으로 반환

    ```java
    List<Integer> list = stream.collect(Collectors.toList());
    ```

2. `forEach()` : 각 요소에 대해 작업을 수행(반복문 대신 사용)

    ```java
    stream.forEach(System.out::println);
    ```

3. `reduce()` : 스트림의 요소들을 하나로 결합

    ```java
    int sum = stream.reduce(0, Integer::sum); // 합 계산
    ```


### 예시


```java
public class StreamExample {
	public static void main(String[] args) {
		List<String> names = Arrays.asList("Alice", "Bob", "Charlie", "David");
		
		// 1. 필터링 : A로 시작하는 이름만
		// 2. 대문자로 변환
		// 3. 리스트로 변환
		List<String> result = names.stream()
																.filter(name -> name.startsWith("A"))
																.map(String::toUpperCase)
																.collect(Collectors.toList());
																
		result.forEach(System.out::println);
	}
}

// 실행 결과 : Alice
```


### 장점

1. 코드가 간결해지고 반복문을 줄여 코드의 가독성이 높아짐
2. `parallelStream()` 을 사용하여 데이터를 병렬 처리할 수 있어 성능을 개선할 수 있음
3. 데이터를 필터링하거나 변환하는 작업을 매우 유연하게 처리할 수 있음
