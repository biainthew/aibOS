---
layout: post
title: "Reduce"
date: 2023-03-02
categories: [general]
tags: [Javascript/Jquery]
excerpt_separator: ""
---



# _reduce_


: 배열의 요소들을 순회하면서 반복적인 연산을 함


### ✔️ 문법


> 💡 `arr.reduce((누적값, 현재값, 인덱스, 요소) ⇒ {return 결과}, 초깃값)`


👉🏻 이전값이 아닌 누적값이기 때문에 다양하게 활용할 수 있다고 한다 lets see


### 🌈 예시


> 💡 `const oneTwoThree = [1,2,3];  
> result = oneTwoThree.reduce((acc, cur, i) ⇒ {  
>     console.log(acc, cur, i);  
>     return acc + cur;  
> },0);  
> //0 1 0  
> //1 2 1  
> //3 3 2  
> result; //6`


👉🏻 결국 배열의 모든 요소의 합을 구하는 것


### ✔️ 동작원리

- 위의 예시를 바탕으로 생각해보면
for문처럼 배열의 길이 만큼 돌아감 (초깃값이 있을 때만 / 없다면 배열의 길이 -1 만큼 돌아감)
0번째에 초깃값 0 + 1 해서 1
1번째에 누적값 1 + 2 해서 3
2번째에 누적값 3 + 3 해서 6 반환

### 🌈 예시


> 💡 `const oneTwoThree = [1,2,3];  
> result = oneTwoThree.reduce((acc, cur) ⇒ {  
>     acc.push(cur % 2 ? '홀수' : '짝수');  
>     return acc;  
> },[]);  
> result; // ['홀수', '짝수', '홀수']`


👉🏻 acc 의 초깃값으로 빈 배열을 주고 거기에 push 해서 `oneTwoThree` 를 기반으로 한 새로운 배열 반환 `map` 과 유사


> 💡 `const oneTwoThree = [1,2,3];  
> result = oneTwoThree.reduce((acc, cur) ⇒ {  
>     if (cur % 2) acc.push(cur);  
>     return acc;  
> },[]);  
> result; // ['1', '3']`


👉🏻 홀수만 `filter`

> **위와 같이 sort, every, some, find, findIndex, includes 도 다 구현 가능**

### 🌈 응용 - 겹치는 값 개수 세기


> 💡 `const votes = ['엄마', '아빠', '아빠', '아빠', '엄마', '엄빠', '아마', '아마', '엄빠', '엄마', '아빠'];  
> const result = votes.reduce((acc, el, i) ⇒ {  
>     console.log(`${i}번째 콜백함수`)  
>     console.log(`acc:` , acc);  
>     console.log(`el:` , el);  
>     acc[el] = (acc[el] || 0) +1;  
>     return acc;  
> },{})`


👉🏻 겹치는 값 개수 세기


```javascript
acc[el] = (acc[el] || 0) +1;
//이해가 되지 않는 이 부분을 좀 더 풀어서 써보면
if(acc[el]){
	acc[el] = acc[el]+1;
}else{
	acc[el] = 0 + 1;
}
//처음에 배열의 첫번째 값 '엄마'가 들어오면 acc[el] 즉 acc.엄마 는 undefined
//acc.엄마 가 undefined 이므로 acc에 엄마 속성을 추가하고 0 + 1 즉 1을 세팅

//즉 acc[el] 이 객체 내에 있는지 물어보고 있으면 그 누적값 +1 없으면 1을 반환한다
```


### 🌈 비동기 프로그래밍 예시


> 💡 `const promiseFactory = (time) => {  
>     return new Promise((resolve, reject) => {  
>         console.log(time);  
>         setTimeout(resolve, time);  
>     })  
> }  
> [1000, 2000, 3000, 4000].reduce((acc, cur) ⇒ {  
>     return acc.then(() ⇒ promiseFactory(cur))  
> }, Promise.resolve())`


👉🏻 초깃값을 Promise.resolve() 로 설정한 뒤에 return 된 프로미스에 then 을 붙여 다음 누적값으로 넘기기 / 사실 뭔말인지 모르겠다

