---
layout: post
title: "코딩애플JS Part1-40 html 모듈화"
date: 2023-11-16
categories: [general]
tags: [Javascript/Jquery]
excerpt_separator: ""
---



가끔 보면 복잡한 HTML 태그가 있는데


```javascript
<input type="range"></input>
```


이렇게 쓰면 되게 복잡한 레이아웃이 나옴


실제로 내부적으로도 여러개의 <div> 를 이용해서 만들어진건데


진짜 확인하고 싶으면 크롬 개발자도구 - 설정 - show user agent shadow DOM 켜기 체크


![Untitled.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/8fe0a7f9-120c-81d3-b4d8-0003f7c0f162/e3168f1b-b12b-49d5-8938-dc8cf7e96df4/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466YLVLFGXX%2F20260126%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20260126T112023Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEHQaCXVzLXdlc3QtMiJHMEUCIGcw%2FbX8SozNI0hRPQjBD42qF9nZ9xOaQKBr1DwTldVtAiEAhzt8RVHrPAumdg1%2Bq55AtinKBLVxmCz1S0ZSJRsM1XUq%2FwMIPBAAGgw2Mzc0MjMxODM4MDUiDFGYr0vrzBbxJVTkjircAyUjj36U4xDILpvHj%2BUGWgxKJCN05m9kwaBcgHwOMlvBkSe9SvyHpo0iUDn4h0BpmFjAfocjZ%2FNhgviFP6qolanhYq3%2Bao5Lco2o%2FnQz3FAWRk5buQDLv%2FMDTQn2IrZEunmvXoCleWxMRYvK52p3hmpiFsVv%2Fl70pOoIFz7H73Bpq1N%2B1d%2BVqNOUdEnI1uCXkslpAKOUWmKJKX76cv228MsIdX%2FOe983b7tW5uVOVEWda1RWqIUeJ4ULNPIVnYiFsig0sRg%2BgbxxQcA%2FpH8WOeyXx5Pnr7P2%2F7TuK8i9GNUsNZVQHlwjKIQ1rUSRSjy3JaTrSmjX05bPdTo4C80GWjwjhCY%2BG0BasJvRJDQcDmHC0j1GuPJLWZap4gaFfzi39pvdVypsgx07Nz63HfhTyBxpU62Q8fitFlvtNhNTWAZLiSiFluPLryx0slF%2Bi8ke2Id%2FhzzIbHA0xOuzdXwHQ7NlNYZksveYxtiMvXNE8qpZWWz8a7IQzheFYu2xdXP4If9x4ShlEAvSZXFdaWKxOCtUM83L87dlGFdykgypL9bAVwor5UAyzDt8zeEZ3xMHKSJnRY4HJDfIca4nHgPG44f2PXzv%2BLTdjmpoLSX0DPuY2Ylj4YSMJnE2nN%2FcMO6a3csGOqUBLhBJ7CrcvLvDvor7je%2F8VFSHf2Zxnv8GwLPNyVKB%2BvRUVLuAmRqT0H21a2sorVvRHgyDjDFMfeZA%2F38bLhzuCGYXCSedme54SMCbPdMSWR2C5oqMzEhtgkpXrXIEKuIKcqTWu2rG%2BSxHsnQpoPda8Hph8kdWjlAgTHOmY7kqF8qpx2TpZiR9ZauxsAJUrT6IGeEICf1X7d31PIEaBroGg5V7g5u6&X-Amz-Signature=946f107cb83329b74613af127277b8aef9febee4616695a1c199edc1bd66ed80&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)


<input type=”range”> 안에 진짜로 <div> 세 개가 숨어있음


이런걸 shadow DOM 이라고 하는데 일반적으로는 볼 수 없는 숨겨진 HTML 을 의미


### shadow DOM 만드는 법


```javascript
<div class="mordor"></div>
<script>
	document.querySelector('#mordor').attachShadow({mode: 'open'});
	document.querySelector('#mordor').shadowRoot.innerHTML = '<p>하이루</p>'
</script>
```


이러면 <div> 안에 몰래 <p>를 숨길 수 있음

1. 우선 attachShadow()라는 걸 써서 shadowRoot 라는 공간을 하나 만들어 줍니다
2. shadowRoot 여기에 원하는 html 넣으면 숨겨짐

거의 모든 태그는 shadowDOM 을 오픈 할 수 있고


shadowRoot 안에 넣은 걸 전부 shadow DOM 이라고 칭하는데


굳이 써야할 이유도 없고 장점도 없어 보이지만


web component 문법과 합해야 진가를 발휘함


### Web Component 의 단점 : 스타일 오염


```javascript
class 클래스 extends HTMLElement {
  connectedCallback() {
    this.innerHTML = `<label>이름을 입력하쇼</label><input>
      <style> label { color : red } </style>`
  }
}

customElements.define("custom-input", 클래스);
```


```javascript
<custom-input></custom-input>
<label>왜 나까지 빨개짐?</label>
```


스타일까지 함께 컴포넌트화 하고싶으면 컴포넌트 안에 <style>을 집어넣는게 좋음


근데 이렇게 label 태그를 빨간색으로 스타일링 해놨는데


이럴 경우 컴포넌트와는 관계없는 다른 태그들까지 오염이 발생할 수 있음


그렇다고 CSS 적으로 class 를 만들어서 해결한다고 해도


다른 곳과 class 가 겹치면 문제가 생기고


그럴 땐 스타일을 shadow DOM 열어서 거기에 집어넣으면 됨


왜냐면 shadow DOM 안에 있는 스타일은 밖에 영향을 끼치지 않으니까


```javascript
class 클래스 extends HTMLElement {
	connectedCallback() {
		this.attachShadow({mode : 'open'});
		this.shadowRoot.innerHTML = `<label>이름을 입력하쇼</label><input>
      <style> label { color : red } </style>`
	}
}

customElements.define("custom-input", 클래스)
```


```javascript
<custom-input></custom-input>
<label>오 이제 바깥건 안빨개짐</label>
```


이래서 대부분 Web Component 만들 때 shadow DOM 활용함


이래야 진정한 의미의 html 모듈화 개발이 가능


### html 임시보관함 <template> 태그


컴포넌트 만들 때 html 이 너무 길어지면 <template> 에 보관해두고 집어넣을수도 있음


```javascript
<custom-input></custom-input>
<template id="template1">
	<label>이메일을 입력하쇼</label><input>
  <style>label { color : red }</style>
</template>
<script>
	class 클래스 extends HTMLElements {
		connectedCallback() {
			this.attachShadow({mode : 'open'});
			this.shadowRoot.append(template1.content.cloneNode(true))
		}
	}
customElements.define("custom-input", 클래스)
</script>
```

1. template 은 특수한 태그인데 여기에 적은 html 은 렌더링 되지 않음
2. 그래서 거기에 html들 잠깐 보관하고
3. this.shadowRoot.append(template1.content.cloneNode(true)) 이런 식으로 집어넣으면 됨

### 이벤트리스너를 부착하고 싶다면


addEventListener 아무데나 코드짜서 부착하면 됨


심지어 shadow DOM 에도 이벤트 리스너 부착 가능


```javascript
<custom-input></custom-input>

<template id="template1">
  <label>이메일을 입력하쇼</label><input>
  <style>label { color : red }</style>
</template>

<script>
	class 클래스 extends HTMLElement {
		connectedCallback() {
			this.attachShadow({mode: 'open'});
			this.shadowRoot.append(template1.content.cloneNode(true));
			let el = this.shadowRoot.querySelector('label');
			el.addEventListener('click', function(){
				console.log('클릭함')
			})
		}
	}
	customElements.define("custom-input", 클래스)
</script>
```


이런식으로 개발하면 자바스크립트도 컴포넌트 안에 담아서 보관할 수 있음


이제 원하는 곳에서 class 만 export 해서 가져다 쓰면 컴포넌트로 모듈식 개발 가능

