---
layout: post
title: "소수점 계산 오류"
date: 2023-05-11
categories: [general]
tags: [Javascript/Jquery]
---


[참고](https://joooing.tistory.com/entry/Javascript-%EC%86%8C%EC%88%98%EC%A0%90floating-point-%EA%B3%84%EC%82%B0-%EC%98%A4%EB%A5%98)

> javascript 에서 소수점 숫자 연산을 하다 보면 생각지도 못한 오류가 발생할 때가 있다고 한다  
>   
> 예를 들어 콘솔창에 0.1 + 0.2 를 입력하면 0.3 이 아닌 0.30000000000000004 이 나온다  
>   
> 이렇게 나오는 이유, 해결 방법에 대해 알아보자

### 원인


우리는 계산을 할 때 보통 10진법을 사용하지만 컴퓨터는 2진법을 사용한다. 그래서 10진법을 2진법으로 바꾸는 변환과정이 필요한데, 소수 중 일부는 이 과정에서 무한소수가 되어버린다. 하지만 컴퓨터 메모리에는 한계가 있어서 무한소수를 다 담지 못하고 중간에 잘라서 유한소수로 저장해버린다. 바로 이 과정에서 미세한 오차가 발생하는 것


### 해결방법

1. `toFixed()`

    입력받은 숫자를 매개변수만큼의 자리수를 반올림해 String 으로 반환해주는 함수이다. 다시말해 매개변수는 소수점 몇 번째 자리까지 나타낼 지를 정한다. 참고로 0부터 20까지 입력할 수 있다.


    그리고 String 으로 반환한다는 점을 주의하자. Number 타입으로 사용하고 싶다면 Number() 메서드를 한 번 더 사용해서 숫자로 변환해줘야 한다.


    ```javascript
    let result = (0.1 + 0.2).toFixed(2);
    //'0.30'
    Number(result);
    //'0.3'
    ```

2. `Math.round()`

    반올림을 해 주는 함수이다. 매개변수로 들어온 값을 반올림한 후, 가장 가까운 정수 값을 반환한다. toFixed() 의 매개변수를 0으로 지정해 줬을 때처럼 정수값을 반환한다

1. **기타 라이브러리**

    Javascript의 수학 라이브러리를 이용하면 좀 더 쉽게 계산을 할 수도 있다. [Big.js](https://github.com/MikeMcl/big.js/),  [BigNumber.js](https://github.com/MikeMcl/bignumber.js/),  [Decimal.js](https://github.com/MikeMcl/decimal.js/),  [mathjs](https://mathjs.org/) 등의 라이브러리들이 있으니 찾아보고 사용하면 된다.

